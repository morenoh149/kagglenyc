doctype html
html

  head
    meta(http-equiv="Content-Type", content="text/html; charset=utf-8")
    script
      | window.dataLayer = window.dataLayer || [];
      | function gtag(){dataLayer.push(arguments);}
      | gtag('js', new Date());
      | gtag('config', 'UA-42985946-9');
    script(async, src="https://www.googletagmanager.com/gtag/js?id=UA-42985946-9")
    meta(name="viewport", content="width=device-width, initial-scale=1")
    meta(name="description", content="A machine learning community based out of New York City.")
    meta(property="og:title", content="Kaggle NYC Group")
    meta(property="og:description", content="A machine learning community based out of New York City.")
    meta(property="og:image", content="http://kagglenyc.com/images/preview.png")
    meta(property="og:url", content="http://kagglenyc.com")
    title #{__('TITLE', community)}
    link(href="css/style.css", rel="stylesheet", type="text/css")
    link(href="//fonts.googleapis.com/css?family=Lato:300,400,700,900,700italic|Open+Sans:700italic,400,600,300,700,800", rel="stylesheet", type="text/css")
    link(rel="shortcut-icon", type="image/x-icon", href="/favicon.ico")

  body
    #wrapper
      .main
        .header
          h1 KaggleNYC
          h2#headline A group of Data Scientists, Data Engineers and Machine Learning Engineers in New York City that gather to practice through Kaggle Competitions.
        .content
          .information
            h2#cta Join Us!
            form(method="POST", action="/invite")#join-form.form
              input(type="email", name="email", autofocus, placeholder=__('ENTER_EMAIL'))#slack-email.field
              if tokenRequired
                input(type="text", name="token", placeholder=__('ENTER_TOKEN'))#slack-token.field
              input(type="submit", value="Invite Me!").submit
              if !!recaptchaSiteKey
                div(class="g-recaptcha", data-sitekey="#{recaptchaSiteKey}")
            p <sub>We do not store your email.</sub>
          p
            | See 
            a(href='https://www.meetup.com/Kaggle-NYC' target='_blank') Meetup.com 
            | for the next meetup.
          p All levels are welcome.
          p
            | Currently Competing: 
            a(href='https://www.kaggle.com/c/airbus-ship-detection' target='_blank') Airbus Ship detection Challenge
            |  ends October 4, 2018.

    if !!recaptchaSiteKey
       script(src='https://www.google.com/recaptcha/api.js')
    script.
      var tokenRequired = #{tokenRequired};
      var form = document.getElementById('join-form');
      var email = document.getElementById('slack-email');
      var token = document.getElementById('slack-token');
      form.addEventListener('submit', function(evt) {
        if (!email.value) {
          evt.preventDefault();
        }
        if (tokenRequired && !token.value) {
          evt.preventDefault();
        }
        var recaptcha = document.getElementById('g-recaptcha-response');
        if (recaptcha && recaptcha.value === '') {
          evt.preventDefault();
        }
      });
